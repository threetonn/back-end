"use strict";(self["webpackChunktriton"]=self["webpackChunktriton"]||[]).push([[1420,9648],{391:function(e,a,r){r.r(a),r.d(a,{default:function(){return k}});var s=r(3396),l=r(7139),t=r(9242),i=r(4969);const n={class:"base-inputs__input-wrapper"},o=["type","placeholder"],u=["disabled"],p=(0,s._)("img",{src:i,alt:"save"},null,-1),d=[p],c={class:"error-msg"};function g(e,a,r,i,p,g){return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["base-inputs__wrapper",{error:i.v$.formField.$errors.length}])},[(0,s._)("div",n,[(0,s.wy)((0,s._)("input",{class:"base-inputs__input",type:r.type,placeholder:r.placeholder,"onUpdate:modelValue":a[0]||(a[0]=e=>i.state.formField=e)},null,8,o),[[t.YZ,i.state.formField]]),(0,s._)("button",{class:(0,l.C_)(["base-inputs__button",!i.fieldValidated&&"disabled"]),onClick:a[1]||(a[1]=(0,t.iM)(((...e)=>i.changeData&&i.changeData(...e)),["prevent"])),disabled:!i.fieldValidated},d,10,u)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.v$.formField.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"input-errors",key:e.$uid},[(0,s._)("div",c,(0,l.zw)(e.$message),1)])))),128))],2)}r(7658);var _=r(4870),m=r(3053),v=r(9117),f=r(8703),w={props:{fieldName:String,field:String,type:String,placeholder:String,callback:Function,rules:Array},setup(e){const a=(0,_.iH)(!1),r=(0,_.qj)({formField:e.field||null}),l=()=>{const a=[],r=e=>""!==e.params?e.errorMessage?String(e.errorMessage+" "+e.params.join(" и ")):String(f.$VALIDATORS_MESSAGE[e.name]+" "+e.params.join(" и ")):e.errorMessage?String(e.errorMessage):String(f.$VALIDATORS_MESSAGE[e.name]),s=e=>""!==e.params?e.customValidator?e.customValidator(...e.params):v[e.name](...e.params):e.customValidator?e.customValidator:v[e.name];for(let l=0;l<e.rules.length;l++){const t=e.rules[l],i=v.helpers.withMessage(r(t),s(t));a.push(i)}return a},t=(0,s.Fl)((()=>({formField:{...l()}}))),i=(0,m.Xw)(t,r),n=()=>{if(i.value.$touch(),i.value.$errors.length)return a.value=!1;a.value=!0};(0,s.YP)((()=>r.formField),(()=>n()));const o=()=>{i.value.$invalid||e.callback({[e.fieldName]:r.formField})};return{v$:i,state:r,fieldValidated:a,changeData:o}}},b=r(89);const h=(0,b.Z)(w,[["render",g]]);var k=h},2127:function(e,a,r){r.r(a),r.d(a,{default:function(){return h}});var s=r(3396),l=r(7139),t=r(9242),i=r(4969);const n={class:"base-inputs__password-inputs"},o={class:"error-msg"},u={class:"error-msg"},p=["disabled"],d=(0,s._)("img",{src:i,alt:"save"},null,-1),c=[d];function g(e,a,r,i,d,g){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",{class:(0,l.C_)(["base-inputs__wrapper",{error:i.v$.password.$errors.length}])},[(0,s.wy)((0,s._)("input",{class:"base-inputs__input",type:"password",name:"signup-password",id:"signup-password",placeholder:"Новый пароль","onUpdate:modelValue":a[0]||(a[0]=e=>i.state.password=e)},null,512),[[t.nr,i.state.password]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.v$.password.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"input-errors",key:e.$uid},[(0,s._)("div",o,(0,l.zw)(e.$message),1)])))),128))],2),(0,s._)("div",{class:(0,l.C_)(["base-inputs__wrapper",{error:i.v$.repassword.$errors.length}])},[(0,s.wy)((0,s._)("input",{class:"base-inputs__input",type:"password",name:"signup-repassword",id:"signup-repassword",placeholder:"Повторите пароль","onUpdate:modelValue":a[1]||(a[1]=e=>i.state.repassword=e)},null,512),[[t.nr,i.state.repassword]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.v$.repassword.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"input-errors",key:e.$uid},[(0,s._)("div",u,(0,l.zw)(e.$message),1)])))),128))],2),(0,s._)("button",{class:(0,l.C_)(["base-inputs__button",!i.fieldValidated&&"disabled"]),onClick:a[2]||(a[2]=(0,t.iM)(((...e)=>i.changeData&&i.changeData(...e)),["prevent"])),disabled:!i.fieldValidated},c,10,p)])}var _=r(4870),m=r(3053),v=r(9117),f={props:{callback:Function,fieldName:String},setup(e){const a=(0,_.iH)(!1),r=(0,_.qj)({password:"",repassword:""}),l=(0,s.Fl)((()=>({password:{required:v.helpers.withMessage("Поле обязательно для заполнения",v.required),minLength:v.helpers.withMessage("Пароль меньше 8 символов",(0,v.minLength)(8))},repassword:{required:v.helpers.withMessage("Поле обязательно для заполнения",v.required),sameAs:v.helpers.withMessage("Пароли не совпадают",(0,v.sameAs)(r.password))}}))),t=(0,m.Xw)(l,r),i=()=>{if(t.value.$touch(),t.value.$invalid)return a.value=!1;a.value=!0};(0,s.YP)((()=>[r.password,r.repassword]),(()=>i()));const n=()=>{t.value.$invalid||e.callback({[e.fieldName]:r.password})};return{v$:t,state:r,fieldValidated:a,changeData:n}}},w=r(89);const b=(0,w.Z)(f,[["render",g]]);var h=b},7944:function(e,a,r){r.r(a),r.d(a,{default:function(){return V}});var s=r(3396),l=r(7139),t=r(9242),i=r(4969);const n={class:"base-inputs__radio-wrapper"},o={class:"gender"},u=(0,s._)("span",{class:"gender__text"},"Пол:",-1),p={class:"gender__group"},d=["checked"],c=(0,s._)("label",{for:"male"},"Муж.",-1),g={class:"gender__group"},_=["checked"],m=(0,s._)("label",{for:"female"},"Жен.",-1),v={class:"error-msg"},f=["disabled"],w=(0,s._)("img",{src:i,alt:"save"},null,-1),b=[w];function h(e,a,r,i,w,h){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",{class:(0,l.C_)(["base-inputs__wrapper",{error:i.v$.gender.$errors.length}])},[(0,s._)("div",o,[u,(0,s._)("div",p,[(0,s.wy)((0,s._)("input",{class:"gender__input",type:"radio",id:"male",name:"radio-group",value:"male",checked:"male"===i.state.gender?.en,"onUpdate:modelValue":a[0]||(a[0]=e=>i.state.gender=e)},null,8,d),[[t.G2,i.state.gender]]),c]),(0,s._)("div",g,[(0,s.wy)((0,s._)("input",{class:"gender__input",type:"radio",id:"female",name:"radio-group",value:"female",checked:"female"===i.state.gender?.en,"onUpdate:modelValue":a[1]||(a[1]=e=>i.state.gender=e)},null,8,_),[[t.G2,i.state.gender]]),m])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.v$.gender.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"input-errors",key:e.$uid},[(0,s._)("div",v,(0,l.zw)(e.$message),1)])))),128))],2),(0,s._)("button",{class:(0,l.C_)(["base-inputs__button",!i.fieldValidated&&"disabled"]),onClick:a[2]||(a[2]=(0,t.iM)(((...e)=>i.changeData&&i.changeData(...e)),["prevent"])),disabled:!i.fieldValidated},b,10,f)])}var k=r(4870),y=r(3053),D=r(9117),$={props:{gender:String,callback:Function,fieldName:String},setup(e){const a=(0,k.iH)(!1),r=(0,k.qj)({gender:e.gender||null}),l=(0,s.Fl)((()=>({gender:{required:D.helpers.withMessage("Не выбран пол",D.required)}}))),t=(0,y.Xw)(l,r),i=()=>{if(t.value.$touch(),t.value.$invalid)return a.value=!1;a.value=!0};(0,s.YP)((()=>r.gender),(()=>i()));const n=()=>{t.value.$invalid||e.callback({[e.fieldName]:r.gender})};return{v$:t,state:r,fieldValidated:a,changeData:n}}},C=r(89);const S=(0,C.Z)($,[["render",h]]);var V=S},9518:function(e,a,r){r.r(a),r.d(a,{default:function(){return k}});var s=r(3396),l=r(7139),t=r(9242),i=r(4969);const n={class:"base-inputs__input-wrapper"},o=["type","placeholder"],u=["disabled"],p=(0,s._)("img",{src:i,alt:"save"},null,-1),d=[p],c={class:"error-msg"};function g(e,a,r,i,p,g){return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["base-inputs__wrapper",{error:i.v$.formField.$errors.length}])},[(0,s._)("div",n,[(0,s.wy)((0,s._)("textarea",{class:"base-inputs__input base-inputs__input--textarea",type:r.type,placeholder:r.placeholder,"onUpdate:modelValue":a[0]||(a[0]=e=>i.state.formField=e)},null,8,o),[[t.nr,i.state.formField]]),(0,s._)("button",{class:(0,l.C_)(["base-inputs__button",!i.fieldValidated&&"disabled"]),onClick:a[1]||(a[1]=(0,t.iM)(((...e)=>i.changeData&&i.changeData(...e)),["prevent"])),disabled:!i.fieldValidated},d,10,u)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.v$.formField.$errors,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"input-errors",key:e.$uid},[(0,s._)("div",c,(0,l.zw)(e.$message),1)])))),128))],2)}r(7658);var _=r(4870),m=r(3053),v=r(9117),f=r(8703),w={props:{fieldName:String,field:String,type:String,placeholder:String,callback:Function,rules:Array},setup(e){const a=(0,_.iH)(!1),r=(0,_.qj)({formField:e.field||null}),l=()=>{const a=[],r=e=>""!==e.params?e.errorMessage?String(e.errorMessage+" "+e.params.join(" и ")):String(f.$VALIDATORS_MESSAGE[e.name]+" "+e.params.join(" и ")):e.errorMessage?String(e.errorMessage):String(f.$VALIDATORS_MESSAGE[e.name]),s=e=>""!==e.params?e.customValidator?e.customValidator(...e.params):v[e.name](...e.params):e.customValidator?e.customValidator:v[e.name];for(let l=0;l<e.rules.length;l++){const t=e.rules[l],i=v.helpers.withMessage(r(t),s(t));a.push(i)}return a},t=(0,s.Fl)((()=>({formField:{...l()}}))),i=(0,m.Xw)(t,r),n=()=>{if(i.value.$touch(),i.value.$errors.length)return a.value=!1;a.value=!0};(0,s.YP)((()=>r.formField),(()=>n()));const o=()=>{i.value.$invalid||e.callback({[e.fieldName]:r.formField})};return{v$:i,state:r,fieldValidated:a,changeData:o}}},b=r(89);const h=(0,b.Z)(w,[["render",g]]);var k=h},8787:function(e,a,r){r.r(a),r.d(a,{default:function(){return se}});var s=r(3396),l=r(7139),t=r(9242);const i={class:"profile-page"},n=(0,s._)("h1",{class:"profile-page__title"},"Профиль",-1),o={class:"profile-page__tabs"},u={key:0,class:"profile-page__inputs"},p={class:"profile-photo-group"},d={class:"profile-photo"},c=(0,s._)("span",null,"Выберите фото",-1),g=(0,s._)("svg",{width:"54",height:"46",viewBox:"0 0 54 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M49 7.5H40.5L38.475 1.825C38.3351 1.43668 38.0787 1.10101 37.7409 0.86386C37.4031 0.626709 37.0003 0.499636 36.5875 0.500001H17.4125C16.5688 0.500001 15.8125 1.03125 15.5312 1.825L13.5 7.5H5C2.2375 7.5 0 9.7375 0 12.5V41C0 43.7625 2.2375 46 5 46H49C51.7625 46 54 43.7625 54 41V12.5C54 9.7375 51.7625 7.5 49 7.5ZM49.5 41C49.5 41.275 49.275 41.5 49 41.5H5C4.725 41.5 4.5 41.275 4.5 41V12.5C4.5 12.225 4.725 12 5 12H16.6688L17.7375 9.0125L19.1688 5H34.825L36.2562 9.0125L37.325 12H49C49.275 12 49.5 12.225 49.5 12.5V41ZM27 16C21.475 16 17 20.475 17 26C17 31.525 21.475 36 27 36C32.525 36 37 31.525 37 26C37 20.475 32.525 16 27 16ZM27 32C23.6875 32 21 29.3125 21 26C21 22.6875 23.6875 20 27 20C30.3125 20 33 22.6875 33 26C33 29.3125 30.3125 32 27 32Z",fill:"black"})],-1),_=[c,g],m=["src"],v={key:0,class:"error-msg"},f={class:"profile-inputs"},w={class:"profile-inputs__wrapper"},b=["value"],h={class:"profile-inputs__wrapper"},k=["value"],y={key:1,class:"profile-page-info"},D={class:"profile-page-info__image-wrapper"},$=["src"],C={key:1,class:"no-image"},S={class:"profile-page-info__content profile-content"},V=(0,s._)("span",{class:"group-title"},"Активная подписка",-1),T={class:"group-text"},F={class:"profile-content__group"},M=(0,s._)("span",{class:"group-title"},"Имя",-1),E={class:"profile-content__group"},H=(0,s._)("span",{class:"group-title"},"Фамилия",-1),I={class:"profile-content__group"},q=(0,s._)("span",{class:"group-title"},"Отчество",-1),z={class:"profile-content__group"},x=(0,s._)("span",{class:"group-title"},"Email-адрес",-1),U={class:"profile-content__group"},A=(0,s._)("span",{class:"group-title"},"Номер телефона",-1),L={class:"profile-content__group"},N=(0,s._)("span",{class:"group-title"},"Пол",-1),Y={class:"profile-content__group"},j=(0,s._)("span",{class:"group-title"},"Биография",-1),P={class:"profile-content__group"},Z=(0,s._)("span",{class:"group-title"},"Проводимые тренировки",-1),R={key:2,class:"error-msg"};function W(e,a,r,c,g,W){const G=(0,s.up)("TTElementInput"),K=(0,s.up)("TTElementInputTextarea"),O=(0,s.up)("TTElementInputSelect"),X=(0,s.up)("TTElementInputPassword"),B=(0,s.up)("TTElementInputRadio");return(0,s.wg)(),(0,s.iD)("div",i,[n,(0,s._)("div",o,[(0,s._)("button",{onClick:a[0]||(a[0]=e=>c.selectedChangeTab=!1),class:(0,l.C_)([{"toggle-btn--active":!c.selectedChangeTab},"toggle-btn"])}," Профиль ",2),(0,s._)("button",{onClick:a[1]||(a[1]=e=>c.selectedChangeTab=!0),class:(0,l.C_)([{"toggle-btn--active":c.selectedChangeTab},"toggle-btn"])}," Изменить данные ",2)]),c.selectedChangeTab?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",p,[(0,s._)("div",d,[(0,s._)("label",{style:(0,l.j5)("opacity: "+(c.imagePreview?0:1)),class:"profile-photo__label",for:"profile-input"},_,4),(0,s._)("input",{onChange:a[2]||(a[2]=(...e)=>c.onFileChange&&c.onFileChange(...e)),id:"profile-input",type:"file"},null,32),c.imagePreview?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"profile-photo__preview",src:c.imagePreview},null,8,m)):(0,s.kq)("",!0)]),c.photoErrorMessage?((0,s.wg)(),(0,s.iD)("p",v,(0,l.zw)(c.photoErrorMessage),1)):(0,s.kq)("",!0),(0,s._)("button",{onClick:a[3]||(a[3]=(0,t.iM)(((...e)=>c.sendImage&&c.sendImage(...e)),["prevent"])),class:"profile-inputs__button"}," Сохранить ")]),(0,s._)("div",f,[(0,s._)("div",w,[(0,s._)("input",{class:"profile-inputs__input",type:"email",name:"signup-email",id:"signup-email",value:c.user.email,disabled:"",placeholder:"Ваш Email-адрес"},null,8,b)]),(0,s._)("div",h,[(0,s._)("input",{class:"profile-inputs__input",type:"date",value:c.user.birthday,name:"signup-birthday",id:"signup-birthday",placeholder:"Дата рождения",disabled:""},null,8,k)]),(0,s.Wm)(G,{field:c.user.name,fieldName:"name",type:"text",placeholder:"Ваше имя",callback:e=>c.sendUserData(e),rules:[{name:"required",params:""}]},null,8,["field","callback"]),(0,s.Wm)(G,{field:c.user.surname,fieldName:"surname",type:"text",placeholder:"Ваша фамилия",callback:e=>c.sendUserData(e),rules:[{name:"required",params:""}]},null,8,["field","callback"]),(0,s.Wm)(G,{field:c.user.patronymic,fieldName:"patronymic",type:"text",placeholder:"Ваше отчество",callback:e=>c.sendUserData(e),rules:[{name:"required",params:""}]},null,8,["field","callback"]),(0,s.Wm)(G,{field:c.user.phone,fieldName:"phone",type:"text",placeholder:"Ваш номер телефона",callback:e=>c.sendUserData(e),rules:[{name:"customValidator",params:"",errorMessage:"Неверный формат номера",customValidator:c.phoneValidator}]},null,8,["field","callback","rules"]),"trainer"===c.user.role?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(K,{field:c.user.bio,fieldName:"bio",type:"text",placeholder:"Ваша биография",callback:e=>c.sendUserData(e),rules:[{name:"required",params:""},{name:"maxLength",params:[800]}]},null,8,["field","callback"]),(0,s.Wm)(O,{selected:c.user.workout_type,fieldName:"workout_type",label:"description",type:"text",placeholder:"Проводимые тренировки",callback:e=>c.sendUserData(e),rules:[{name:"required",params:""}],options:c.workoutTypes},null,8,["selected","callback","options"])],64)):(0,s.kq)("",!0),(0,s.Wm)(X,{callback:e=>c.sendUserData(e),fieldName:"password"},null,8,["callback"]),(0,s.Wm)(B,{gender:c.user.gender,fieldName:"gender",callback:e=>c.sendUserData(e)},null,8,["gender","callback"])])])):((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("div",D,[c.user?.image?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"profile-page-info__image",src:c.user.image,alt:"profile-photo"},null,8,$)):((0,s.wg)(),(0,s.iD)("div",C,"Нет изображения"))]),(0,s._)("div",S,["client"===c.user.role&&c.activeSubscription?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,l.C_)(["profile-content__group",`profile-subscription profile-subscription--${c.activeSubscription&&c.activeSubscription.subscription.type}`])},[V,(0,s._)("span",null,(0,l.zw)(c.activeSubscription?c.activeSubscription.subscription.title:"нет"),1),(0,s._)("span",T,"Дата окончания: "+(0,l.zw)(c.activeSubscription.end_date),1)],2)):(0,s.kq)("",!0),(0,s._)("div",F,[M,(0,s._)("span",null,(0,l.zw)(c.user.name),1)]),(0,s._)("div",E,[H,(0,s._)("span",null,(0,l.zw)(c.user.surname),1)]),(0,s._)("div",I,[q,(0,s._)("span",null,(0,l.zw)(c.user.patronymic),1)]),(0,s._)("div",z,[x,(0,s._)("span",null,(0,l.zw)(c.user.email),1)]),(0,s._)("div",U,[A,(0,s._)("span",null,(0,l.zw)(c.user.phone),1)]),(0,s._)("div",L,[N,(0,s._)("span",null,(0,l.zw)(c.user.gender?.ru),1)]),"trainer"===c.user.role?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("div",Y,[j,(0,s._)("span",null,(0,l.zw)(c.user.bio),1)]),(0,s._)("div",P,[Z,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.user.workout_type,((e,a)=>((0,s.wg)(),(0,s.iD)("li",{key:a},[(0,s._)("span",null,(0,l.zw)(e.description),1)])))),128))])])],64)):(0,s.kq)("",!0)])])),c.serverError?((0,s.wg)(),(0,s.iD)("div",R,(0,l.zw)(c.serverError),1)):(0,s.kq)("",!0)])}var G=r(4870),K=r(65),O=r(391),X=r(2127),B=r(7944),J=r(9518),Q=r(6989),ee={components:{TTElementInput:O["default"],TTElementInputPassword:X["default"],TTElementInputRadio:B["default"],TTElementInputTextarea:J["default"],TTElementInputSelect:Q["default"]},setup(){const e=(0,K.oR)(),a=(0,s.Fl)((()=>e.getters.getUser)),r=(0,s.Fl)((()=>e.getters.getTokens)),l=(0,s.Fl)((()=>e.getters.getWorkoutTypes)),t=(0,s.Fl)((()=>a.value.subscription.find((e=>!0===e.is_acting)))),i=(0,G.iH)(!1),n=(0,G.iH)(null),o=(0,G.iH)(!1),u=(0,G.iH)(null),p=(0,G.iH)(null),d=(0,G.iH)(null),c=e=>{const a=/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/,r=a.exec(e);return r},g=e=>{d.value=null;const a={maxImageSize:2048,types:["jpg","png","jpeg"]};if(e.size/1024>a.maxImageSize)return d.value=`Изображение не может быть больше ${(a.maxImageSize/1024).toFixed(2)} Мб`;const r=a.types.filter((a=>a===e.type.split("/")[1]));return r.length?d.value:d.value="Данный формат изображения не поддерживается!"},_=e=>{if(u.value=e.target.files[0],!g(u.value))return p.value=window.URL.createObjectURL(u.value)},m=()=>{if(u.value){const a=new FormData;a.append("image",u.value),e.dispatch("uploadImage",{formData:a,access_token:r.value.access_token}),u.value=null,o.value=!1}},v=async a=>{await e.dispatch("changeUserData",{data:a,access_token:r.value.access_token}),o.value=!1};return{user:a,isLoading:i,serverError:n,selectedChangeTab:o,phoneValidator:c,sendImage:m,userImage:u,onFileChange:_,imagePreview:p,photoErrorMessage:d,sendUserData:v,activeSubscription:t,workoutTypes:l}}},ae=r(89);const re=(0,ae.Z)(ee,[["render",W]]);var se=re}}]);
//# sourceMappingURL=1420.87c0a9a9.js.map