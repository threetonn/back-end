"use strict";(self["webpackChunktriton"]=self["webpackChunktriton"]||[]).push([[5145,5497],{5497:function(e,s,r){r.r(s),r.d(s,{$ERRORS_LIST:function(){return i}});const i={NOT_CONNECTED:"Не удалось соединиться с сервером!",NOT_USER_FIND:"Не удалось найти пользователя!"}},5145:function(e,s,r){r.r(s),r.d(s,{default:function(){return F}});var i=r(3396),n=r(7139),a=r(9242);const l=(0,i._)("line",{x1:"1",y1:"16",x2:"16",y2:"1",stroke:"white","stroke-width":"2"},null,-1),p=(0,i._)("line",{x1:"1",y1:"1",x2:"16",y2:"16",stroke:"white","stroke-width":"2"},null,-1),t=[l,p],u={class:"login-form__title"},o={key:0,class:"login-form__wrapper"},g={class:"login-form__inputs lf-inputs"},d={class:"error-msg"},_={class:"error-msg"},m={class:"error-msg"},w={class:"error-msg"},c={class:"error-msg"},v={class:"error-msg"},h={class:"error-msg"},$={class:"error-msg"},y={class:"gender"},f=(0,i._)("span",{class:"gender__text"},"Пол:",-1),D={class:"gender__group"},k=(0,i._)("label",{for:"male"},"Муж.",-1),C={class:"gender__group"},q=(0,i._)("label",{for:"female"},"Жен.",-1),b={class:"error-msg"},M={key:0,class:"error-msg"},E={key:1,class:"login-form__wrapper"},U={class:"login-form__inputs lf-inputs"},z={class:"error-msg"},H={class:"error-msg"},T={key:0,class:"error-msg"},V=["disabled"];function x(e,s,r,l,p,x){return(0,i.wg)(),(0,i.iD)("div",{class:(0,n.C_)(["login-form","signup"===r.formType&&"login-form--height"])},[((0,i.wg)(),(0,i.iD)("svg",{onClick:s[0]||(s[0]=(...e)=>l.handleClose&&l.handleClose(...e)),viewPort:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},t)),(0,i._)("p",u,(0,n.zw)("signup"===r.formType?"Регистрация":"Авторизация"),1),"signup"===r.formType?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("form",{onSubmit:s[11]||(s[11]=(0,a.iM)(((...e)=>l.signup&&l.signup(...e)),["prevent"])),class:"login-form__form"},[(0,i._)("div",g,[(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.email.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"email",name:"signup-email",id:"signup-email",placeholder:"Ваш Email-адрес","onUpdate:modelValue":s[1]||(s[1]=e=>l.state.signup.email=e)},null,512),[[a.nr,l.state.signup.email]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.email.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",d,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.name.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"text",name:"signup-name",id:"signup-name",placeholder:"Вашe имя","onUpdate:modelValue":s[2]||(s[2]=e=>l.state.signup.name=e)},null,512),[[a.nr,l.state.signup.name]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.name.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",_,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.surname.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"text",name:"signup-surname",id:"signup-surname",placeholder:"Фамилия","onUpdate:modelValue":s[3]||(s[3]=e=>l.state.signup.surname=e)},null,512),[[a.nr,l.state.signup.surname]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.surname.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",m,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.patronymic.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"text",name:"signup-patronymic",id:"signup-patronymic",placeholder:"Отчество (необязательно)","onUpdate:modelValue":s[4]||(s[4]=e=>l.state.signup.patronymic=e)},null,512),[[a.nr,l.state.signup.patronymic]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.patronymic.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",w,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.birthday.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"date",name:"signup-birthday",id:"signup-birthday",placeholder:"Дата рождения","onUpdate:modelValue":s[5]||(s[5]=e=>l.state.signup.birthday=e)},null,512),[[a.nr,l.state.signup.birthday]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.birthday.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",c,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.phone.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"text",name:"signup-phone",id:"signup-phone",placeholder:"Номер телефона","onUpdate:modelValue":s[6]||(s[6]=e=>l.state.signup.phone=e)},null,512),[[a.nr,l.state.signup.phone]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.phone.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",v,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.password.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"password",name:"signup-password",id:"signup-password",placeholder:"Ваш пароль",autocomplete:"off","onUpdate:modelValue":s[7]||(s[7]=e=>l.state.signup.password=e)},null,512),[[a.nr,l.state.signup.password]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.password.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",h,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.repassword.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"password",name:"signup-repassword",id:"signup-repassword",placeholder:"Повторите пароль",autocomplete:"off","onUpdate:modelValue":s[8]||(s[8]=e=>l.state.signup.repassword=e)},null,512),[[a.nr,l.state.signup.repassword]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.repassword.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",$,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signup.gender.$errors.length}])},[(0,i._)("div",y,[f,(0,i._)("div",D,[(0,i.wy)((0,i._)("input",{class:"gender__input",type:"radio",id:"male",name:"radio-group",value:"male","onUpdate:modelValue":s[9]||(s[9]=e=>l.state.signup.gender=e)},null,512),[[a.G2,l.state.signup.gender]]),k]),(0,i._)("div",C,[(0,i.wy)((0,i._)("input",{class:"gender__input",type:"radio",id:"female",name:"radio-group",value:"female","onUpdate:modelValue":s[10]||(s[10]=e=>l.state.signup.gender=e)},null,512),[[a.G2,l.state.signup.gender]]),q])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signup.gender.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",b,(0,n.zw)(e.$message),1)])))),128))],2),l.serverError?((0,i.wg)(),(0,i.iD)("div",M,(0,n.zw)(l.serverError),1)):(0,i.kq)("",!0)])],32)])):((0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("form",{onSubmit:s[14]||(s[14]=(0,a.iM)(((...e)=>l.signin&&l.signin(...e)),["prevent"])),class:"login-form__form"},[(0,i._)("div",U,[(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signin.email.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"email",name:"signin-email",id:"signin-email",placeholder:"Ваш Email-адрес","onUpdate:modelValue":s[12]||(s[12]=e=>l.state.signin.email=e)},null,512),[[a.nr,l.state.signin.email]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signin.email.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",z,(0,n.zw)(e.$message),1)])))),128))],2),(0,i._)("div",{class:(0,n.C_)(["lf-inputs__wrapper",{error:l.v$.signin.password.$errors.length}])},[(0,i.wy)((0,i._)("input",{class:"lf-inputs__input",type:"password",name:"signin-password",id:"signin-password",placeholder:"Ваш пароль",autocomplete:"off","onUpdate:modelValue":s[13]||(s[13]=e=>l.state.signin.password=e)},null,512),[[a.nr,l.state.signin.password]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.v$.signin.password.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"input-errors",key:e.$uid},[(0,i._)("div",H,(0,n.zw)(e.$message),1)])))),128))],2),l.serverError?((0,i.wg)(),(0,i.iD)("div",T,(0,n.zw)(l.serverError),1)):(0,i.kq)("",!0)])],32)])),(0,i._)("button",{class:(0,n.C_)(["lf-inputs__button",l.isLoading&&"disabled"]),onClick:s[15]||(s[15]=(0,a.iM)((e=>"signup"===r.formType?l.signup():l.signin()),["prevent"])),disabled:l.isLoading},(0,n.zw)("signup"===r.formType?"Регистрация":"Авторизация"),11,V)],2)}var K=r(5497),Y=r(4870),O=r(65),N=r(3053),R=r(9117),S={props:{formType:String},setup(){const e=(0,O.oR)(),s=(0,Y.iH)(!1),r=(0,Y.iH)(null),n=(0,Y.qj)({signin:{email:"",password:""},signup:{email:"",name:"",surname:"",patronymic:"",birthday:"",phone:"",gender:"",password:"",repassword:""}}),a=e=>{const s=/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/,r=s.exec(e);return r},l=(0,i.Fl)((()=>({signin:{email:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required),email:R.helpers.withMessage("Почта неверно заполнена",R.email)},password:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required)}},signup:{email:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required),email:R.helpers.withMessage("Почта неверно заполнена",R.email)},name:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required)},surname:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required)},patronymic:"",birthday:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required)},phone:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required),phoneValidator:R.helpers.withMessage("Неверный формат номера",a)},gender:{required:R.helpers.withMessage("Не выбран пол",R.required)},password:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required),minLength:R.helpers.withMessage("Пароль меньше 8 символов",(0,R.minLength)(8))},repassword:{required:R.helpers.withMessage("Поле обязательно для заполнения",R.required),sameAs:R.helpers.withMessage("Пароли не совпадают",(0,R.sameAs)(n.signup.password))}}}))),p=(0,N.Xw)(l,n),t=()=>{u(),e.dispatch("hideActiveForm")},u=()=>{for(const e in n.value)Object.hasOwnProperty.call(n.value,e)&&(n.value[e]="")},o=()=>{if(r.value=null,s.value=!0,p.value.signup.$touch(),p.value.signup.$errors.length)return s.value=!1,console.log("Невалидно");try{e.dispatch("signUpUser",n.signup),s.value=!1,e.dispatch("hideActiveForm")}catch(i){throw s.value=!1,new Error(i)}return console.log("Валидно")},g=()=>{r.value=null,s.value=!0,p.value.signin.$touch(),p.value.signin.$errors.length&&(s.value=!1);try{e.dispatch("signInUser",n.signin),s.value=!1,e.dispatch("hideActiveForm")}catch(i){throw s.value=!1,r.value=K.$ERRORS_LIST.NOT_CONNECTED,new Error(i)}};return{state:n,v$:p,handleClose:t,signup:o,signin:g,isLoading:s,serverError:r}}},L=r(89);const A=(0,L.Z)(S,[["render",x]]);var F=A}}]);
//# sourceMappingURL=5145.c9160ee0.js.map